<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Juego Mosqueta</title>

    <style>
        /* El fondo de la pagina */
        body {
            margin: 0;
            padding: 0;
            font-family: 'Arial', sans-serif;
            text-align: center;

            /* Fondo con degradado en tonos azules oscuros */
            background: linear-gradient(270deg, #000050, #001a66, #000050);
            background-size: 600% 600%; /* Ampl√≠a el fondo para animarlo */
            animation: fondoAnimado 20s ease infinite; /* Movimiento suave e infinito del fondo */
        }

        /* T√≠tulo principal */
        h1 {
            color: turquoise;
            margin-top: 30px;
        }

        /* Texto descriptivo */
        p {
            color: white;
        }

        /* Contenedor que organiza los vasos horizontalmente */
        .game-container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 40px;
            margin-top: 50px;
            position: relative;
            height: 250px;
        }

        /* Vasos: estilo visual y animaciones para simular objetos f√≠sicos */
        .vaso {
            width: 110px;
            height: 150px;

            /* Bordes redondeados para simular la forma  de un vaso */
            border-radius: 70% 70% 70% 70% / 70% 70% 10% 10%;

            /* Los colores del vaso, en este caso representamos el de zappy que es naranja y celeste */
            background: linear-gradient(to bottom, orange 80%, #00cfff 80%);
            border: 4px solid #00cfff;

            position: relative;
            cursor: pointer;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); 
            z-index: 2;

            /* Animaciones al levantar o pasar el mouse */
            transition: transform 0.4s ease-in-out, box-shadow 0.3s ease;
            animation: aparecer 0.8s ease-out;
        }

        /* Efecto al pasar el mouse: hace brillar el vaso */
        .vaso:hover {
            box-shadow: 0 0 20px cyan;
            transform: scale(1.05); /* Lo agranda ligeramente */
        }

        /* Esto hace que se levante el vaso cuando es seleccionado */
        .vaso.levantado {
            transform: translateY(-100px) rotate(-5deg); /* Mueve el vaso hacia arriba y lo gira un poco */
        }

        /* Pelota oculta que aparece solo si se acierta */
        .pelota {
            width: 50px;
            height: 50px; /* ancho y alto de la pelota */
            border-radius: 50%; /* La hace redonda */
            background: url(./mosqueta/pelota.jpg) no-repeat center/cover; /* Imagen como pelota */
            position: absolute; /*posicion absoluta */
            bottom: 0; 
            z-index: 1;
            display: none; /* Inicialmente no visible */
        }

        /* Contenedor de botones */
        .botones {
            margin-top: 20px;
        }

        /* Bot√≥n de reinicio */
        .botones button {
            margin: 5px;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: aqua;
            border: 4px solid #00cfff;
            transition: background-color 0.3s;
        }

        .botones button:hover {
            background-color: #00ffff; /* Cambio de color al pasar el mouse */
        }

        /* Mensaje de resultado */
        #mensaje {
            margin-top: 20px;
            font-size: 24px;
            color: #fff;
            opacity: 0;
            transition: all 0.4s ease;
        }

        /* Cuando se acierta o falla, se muestra el mensaje con animaci√≥n */
        #mensaje.mostrar {
            opacity: 1;
            transform: scale(1.1);
        }
    </style>
</head>

<body>
    <!-- el titulo del juego decorado-->
    <h1 style="font-size: 3em; letter-spacing: 2px; text-shadow: 0 0 20px cyan, 0 0 10px #00cfff;">
        üé≤ Juego de la <span style="color: gold; text-shadow: 0 0 10px orange;">Mosqueta</span> üé≤ 
    </h1>
    <p>Haz clic en un vaso para intentar adivinar d√≥nde est√° la pelota.</p>

    <div class="botones">
        <button id="reiniciar">Reiniciar</button> <!-- Un boton util para reiniciar el juego -->
    </div>

    <div class="game-container" id="juego">
        <div class="vaso" data-vaso="0"></div>
        <div class="vaso" data-vaso="1"></div>
        <div class="vaso" data-vaso="2"></div>
        <div class="pelota" id="pelota"></div>
    </div>

    <div id="mensaje"></div>

    <script>
        // la computadora lee al usuario
        const vasos = document.querySelectorAll('.vaso');
        const pelota = document.getElementById('pelota');
        const reiniciar = document.getElementById('reiniciar');
        const mensaje = document.getElementById('mensaje');

        // Se esconde la pelota (Vaso 1, 2 o 3)
        let posicionPelota = Math.floor(Math.random() * 3);
        let juegoActivo = true; 

        // Oculta la pelota visualmente
        function ocultarPelota() {
            pelota.style.display = 'none';
        }

        // Muestra la pelota justo debajo del vaso correcto
        function mostrarPelotaEn(indice) {
            const vaso = vasos[indice];
            const rect = vaso.getBoundingClientRect();
            const juegoRect = document.getElementById('juego').getBoundingClientRect();

            // Calculamos la posici√≥n horizontal donde colocar la pelota
            pelota.style.left = (rect.left - juegoRect.left + vaso.offsetWidth / 2 - 25) + 'px';
            pelota.style.display = 'block';
        }

        // Muestra un mensaje al jugador si es correcto o incorrecto
        function mostrarMensaje(texto, correcto) {
            mensaje.textContent = texto;
            mensaje.style.color = correcto ? 'lime' : 'red';
            mensaje.classList.add('mostrar');

            // Oculta el mensaje despu√©s de 2 segundos (2000 esta calculado en milisegundos)
            setTimeout(() => {
                mensaje.classList.remove('mostrar');
            }, 2000);
        }

        // Limpia el estado del juego para volver a jugar
        function limpiarJuego() {
            mensaje.textContent = '';
            ocultarPelota();
            vasos.forEach(v => v.classList.remove('levantado'));
            juegoActivo = true;
        }

        // Clicks del usuario en los vasos
        vasos.forEach((vaso, index) => { 
            vaso.addEventListener('click', () => {  
                if (!juegoActivo) return; 

                vasos.forEach(v => v.classList.remove('levantado')); // Baja todos los vasos
                vaso.classList.add('levantado'); // Levanta el vaso clickeado

                if (index == posicionPelota) { // Verifica si el vaso clickeado es el correcto
                    mostrarPelotaEn(index); //muestra la pelota
                    mostrarMensaje('¬°Correcto! La pelota est√° aqu√≠.', true); // muestra el mensaje correcto y se termina el juego
                    juegoActivo = false; // Termina el turno
                } else {
                    mostrarMensaje('¬°Incorrecto! Intenta de nuevo.', false); //muestra el mensaje incorrecto y sigue el juego
                }
            });
        });

        //  Es para reiniciar el juego y esconder la pelota
        reiniciar.addEventListener('click', () => {
            limpiarJuego();
            posicionPelota = Math.floor(Math.random() * 3); // Reasigna la posici√≥n aleatoria
        });

        // Inicialmente, la pelota est√° oculta
        ocultarPelota();
    </script>
</body>
</html>